<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.30.9">
    <meta name="project" content="bonfire_umbrella v0.9.8-cooperation-beta.26">

    <title>Bonfire.Data.AccessControl — bonfire_umbrella v0.9.8-cooperation-beta.26</title>
    <link rel="stylesheet" href="dist/html-elixir-XFYN5IVA.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-EPF2X7PV.js"></script>
    <script src="dist/sidebar_items-977660D3.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/html-J2ASZTQE.js"></script>


  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">
  <form class="sidebar-search" action="search.html">
    <label class="search-label">
      <span class="sr-only">Search documentation of bonfire_umbrella</span>
      <input name="q" type="text" class="search-input" placeholder="Search..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
    </label>
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
      <i class="ri-close-line ri-lg" title="Cancel search"></i>
    </button>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="https://bonfirenetworks.org">
        <img src="assets/logo.png" alt="bonfire_umbrella" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="https://bonfirenetworks.org" class="sidebar-projectName" translate="no">
bonfire_umbrella
      </a>
      <div class="sidebar-projectVersion" translate="no">
        v0.9.8-cooperation-beta.26
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


        <li>
          <button id="tasks-list-tab-button" role="tab" data-type="tasks" aria-controls="tasks-tab-panel" aria-selected="false" tabindex="-1">
            <span translate="no">Mix</span> Tasks
          </button>
        </li>

    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


    <div id="tasks-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="tasks-list-tab-button" hidden>
      <ul id="tasks-full-list" class="full-list"></ul>
    </div>

</nav>

<main class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="icon-action display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/bonfire-networks/bonfire_data_access_control/blob/main/README.md#L1" title="View Source" class="icon-action" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>


  <span>Bonfire.Data.AccessControl</span>
</h1>

<p>See also <a href="https://bonfirenetworks.org/docs/boundaries/">https://bonfirenetworks.org/docs/boundaries/</a> for more docs (TODO: merge/deduplicate)</p><p>Bonfire has a slightly unusual way of dealing with access control.
It's not so different from role-based access control (RBAC), but we do
a few things differently and there are quite a lot of pieces to get
your head around. We'll start gently.</p><p>Bonfire has a <code class="inline">Verb</code> table containing strings like &quot;comment&quot; and
&quot;delete&quot; that represent actions a user might wish to perform. They are
a basic part of the bonfire vocabulary within the codebase.</p><p>A permission is a decision about whether the action may be performed
it not. There are 3 decisions we support:</p><ul><li><code class="inline">true</code> (permitted)</li><li><code class="inline">false</code> (explicitly not permitted, never permit)</li><li><code class="inline">null</code>/<code class="inline">nil</code> (not explicitly permitted)</li></ul><p>It may seem odd to have the <code class="inline">null</code> here. We will come back to this
after we've introduced a few more pieces of the puzzle.</p><p>A boundary is simply an unordered list or group of permissions. Each
permission may only occur once. Any permissions that are not specified
are assumed to be <code class="inline">null</code>. This loosely corresponds to a <code class="inline">role</code> in RBAC.</p><p>A <code class="inline">Grant</code> links a <code class="inline">subject</code> (user or circle) to a boundary. It
determines what permissions are considered for a given subject.</p><p>A <code class="inline">Acl</code> is simply an unordered list or group of <code class="inline">Grant</code>s. Subjects may
appear more than once in a list (with different boundaries) and the
permissions will be merged according to the following truth table:</p><table><thead><tr><th style="text-align: left;">input</th><th style="text-align: left;">input</th><th style="text-align: left;">output</th></tr></thead><tbody><tr><td style="text-align: left;">false</td><td style="text-align: left;">false</td><td style="text-align: left;">false</td></tr><tr><td style="text-align: left;">false</td><td style="text-align: left;">true</td><td style="text-align: left;">false</td></tr><tr><td style="text-align: left;">false</td><td style="text-align: left;">null</td><td style="text-align: left;">false</td></tr><tr><td style="text-align: left;">true</td><td style="text-align: left;">false</td><td style="text-align: left;">false</td></tr><tr><td style="text-align: left;">true</td><td style="text-align: left;">true</td><td style="text-align: left;">true</td></tr><tr><td style="text-align: left;">true</td><td style="text-align: left;">null</td><td style="text-align: left;">true</td></tr><tr><td style="text-align: left;">null</td><td style="text-align: left;">false</td><td style="text-align: left;">false</td></tr><tr><td style="text-align: left;">null</td><td style="text-align: left;">true</td><td style="text-align: left;">true</td></tr><tr><td style="text-align: left;">null</td><td style="text-align: left;">null</td><td style="text-align: left;">null</td></tr></tbody></table><p>Or in words: take the highest value where <code class="inline">false &gt; true &gt; null</code>.</p><p>At the end of this combination process, the user is only permitted if
the result is true. You can see this as requiring an affirmative
answer to permit something, while always allowing you a bigger <code class="inline">no</code> to
deny when things are combined. Null values are additionally not
required to be present in the database, saving us resources. That is
to say we default to null if there is no relevant record.</p><p>Finally, an object is linked to one or more <code class="inline">Acl</code>s by the <code class="inline">Controlled</code> multimixin, which pairs an object ID with an ACL ID. Because it is a multimixin, a given object can have multiple ACLs applied. In the case of overlap, permissions are combined in the manner described earlier. </p><h2 id="copyright-and-license" class="section-heading">
  <a href="#copyright-and-license" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Copyright and License</span>
</h2>
<p>Copyright (c) 2020 James Laver, <code class="inline">bonfire_data_access_control</code> Contributors</p><p>This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at <a href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>.</p>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="extension-bonfire_invite_links.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Bonfire.Invite.Links
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="extension-bonfire_data_activity_pub.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Bonfire.Data.ActivityPub
        </span>
      </a>

  </div>
</div>
      <footer class="footer">
        <p>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
              Search HexDocs
            </button>

              <a href="bonfire_umbrella.epub" title="ePub version">
                Download ePub version
              </a>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.30.9) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</main>
</div>


  </body>
</html>
